{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelRadio as _vModelRadio, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"menu\"\n};\nconst _hoisted_2 = {\n  class: \"menu-carousel\"\n};\nconst _hoisted_3 = {\n  class: \"menu-item-detail\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  class: \"menu-item-detail-info\"\n};\nconst _hoisted_6 = {\n  class: \"Product-Pice\"\n};\nconst _hoisted_7 = {\n  class: \"size-selection\"\n};\nconst _hoisted_8 = {\n  class: \"size-options\"\n};\nconst _hoisted_9 = [\"id\", \"value\", \"onChange\"];\nconst _hoisted_10 = [\"for\"];\nconst _hoisted_11 = {\n  class: \"add-item\"\n};\nconst _hoisted_12 = {\n  key: 0\n};\nconst _hoisted_13 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n    src: $data.product.image,\n    alt: \"Juice\",\n    class: \"menu-item-image\"\n  }, null, 8 /* PROPS */, _hoisted_4), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h3\", null, _toDisplayString($data.product.name), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($data.product.description), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, _toDisplayString($data.selectedPrice), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Số lượng còn: \" + _toDisplayString($data.product.quality), 1 /* TEXT */), _createCommentVNode(\" Chọn kích thước \"), _createElementVNode(\"div\", _hoisted_7, [_cache[2] || (_cache[2] = _createElementVNode(\"h4\", null, \"Chọn kích thước\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.sizes, size => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: size.id\n    }, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"radio\",\n      id: 'size-' + size.id,\n      value: size.type,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.selectedSize = $event),\n      onChange: $event => $options.updatePrice(size.price)\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_9), [[_vModelRadio, $data.selectedSize]]), _createElementVNode(\"label\", {\n      for: 'size-' + size.id\n    }, _toDisplayString(size.type), 9 /* TEXT, PROPS */, _hoisted_10)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createElementVNode(\"div\", _hoisted_11, [parseInt($data.product.quality) === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, \"Hết hàng\")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    class: \"add-to-cart-button\",\n    onClick: _cache[1] || (_cache[1] = $event => $options.addToCart($data.product, $data.selectedSize, $data.selectedPrice))\n  }, \" + \")]))])])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","src","$data","product","image","alt","_hoisted_4","_hoisted_5","_toDisplayString","name","description","_hoisted_6","selectedPrice","quality","_createCommentVNode","_hoisted_7","_hoisted_8","_Fragment","_renderList","sizes","size","id","type","value","_cache","$event","selectedSize","onChange","$options","updatePrice","price","_hoisted_9","for","_hoisted_10","_hoisted_11","parseInt","_hoisted_12","_hoisted_13","onClick","addToCart"],"sources":["D:\\BaiHoc\\HK6\\CongCuVaMoiTruongPhatTrienUngDung\\Vue-Project\\my-project-restaurant\\src\\components\\ComProductDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"menu\">\r\n    <div class=\"menu-carousel\">\r\n      <div class=\"menu-item-detail\">\r\n        <img :src=\"product.image\" alt=\"Juice\" class=\"menu-item-image\" />\r\n        <div class=\"menu-item-detail-info\">\r\n          <h3>{{ product.name }}</h3>\r\n          <p>{{ product.description }}</p>\r\n          <p class=\"Product-Pice\">{{ selectedPrice }}</p>\r\n          <p>Số lượng còn: {{ product.quality }}</p>\r\n\r\n          <!-- Chọn kích thước -->\r\n          <div class=\"size-selection\">\r\n            <h4>Chọn kích thước</h4>\r\n            <div class=\"size-options\">\r\n              <div v-for=\"size in sizes\" :key=\"size.id\">\r\n                <input\r\n                  type=\"radio\"\r\n                  :id=\"'size-' + size.id\"\r\n                  :value=\"size.type\"\r\n                  v-model=\"selectedSize\"\r\n                  @change=\"updatePrice(size.price)\"\r\n                />\r\n                <label :for=\"'size-' + size.id\">{{ size.type }}</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"add-item\">\r\n          <div v-if=\"parseInt(product.quality) === 0\">Hết hàng</div>\r\n          <div v-else>\r\n            <button\r\n              class=\"add-to-cart-button\"\r\n              @click=\"addToCart(product, selectedSize, selectedPrice)\"\r\n            >\r\n              +\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport APIURL from '../constraint'; \r\nimport cart from '@/data/Cart';\r\nimport eventBus from '@/evenBus';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      product: {},\r\n      cart: cart,\r\n      selectedSize: '', // Biến để lưu kích thước đã chọn\r\n      selectedPrice: '', // Biến để lưu giá đã chọn\r\n      sizes: [], // Khởi tạo sizes là mảng rỗng\r\n    };\r\n  },\r\n  async mounted() {\r\n    const id = this.$route.params.id; // Lấy ID từ URL\r\n    try {\r\n      const response = await axios.get(`${APIURL}productDrink/${id}`);\r\n      this.product = response.data; // Lưu dữ liệu sản phẩm vào product\r\n      this.sizes = this.product.sizes || []; // Cập nhật danh sách kích thước\r\n      if (this.sizes.length > 0) {\r\n        this.selectedSize = this.sizes[0].type; // Chọn kích thước đầu tiên\r\n        this.selectedPrice = this.sizes[0].price; // Cập nhật giá ban đầu\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching product details:', error);\r\n    }\r\n  },\r\n  methods: {\r\n    updatePrice(newPrice) {\r\n      this.selectedPrice = newPrice; // Cập nhật giá khi chọn kích thước\r\n    },\r\n\r\n    addToCart(product, size, price) {\r\n      // Kiểm tra nếu sản phẩm trong giỏ hàng đã bị xóa hoặc giảm số lượng hết\r\n      const itemIndex = this.cart.findIndex(\r\n        (item) => item.id === product.id && item.selectedSize === size\r\n      );\r\n\r\n      // Nếu sản phẩm đã có trong giỏ và còn hàng tồn\r\n      if (itemIndex !== -1) {\r\n        const item = this.cart[itemIndex];\r\n        if (product.quality > 0) {\r\n          item.quantity++; // Tăng số lượng sản phẩm trong giỏ\r\n          product.quality--; // Giảm số lượng tồn kho\r\n        } else {\r\n          // Nếu không còn hàng, xóa sản phẩm khỏi giỏ hàng\r\n          this.cart.splice(itemIndex, 1); // Xóa sản phẩm ra khỏi giỏ\r\n        }\r\n      } else if (product.quality > 0) {\r\n        // Nếu sản phẩm chưa có trong giỏ và còn hàng tồn\r\n        this.cart.push({\r\n          ...product,\r\n          selectedSize: size,\r\n          selectedPrice: price,\r\n          quantity: 1,\r\n        });\r\n        product.quality--; // Giảm số lượng tồn kho\r\n      }\r\n\r\n      // Cập nhật lại giỏ hàng vào localStorage\r\n      this.updateLocalStorage();\r\n\r\n      // Phát sự kiện cập nhật giỏ hàng\r\n      eventBus.emit('cart-updated', this.cart.length); // Truyền số lượng sản phẩm trong giỏ\r\n    },\r\n\r\n    // Hàm cập nhật giỏ hàng vào localStorage\r\n    updateLocalStorage() {\r\n      // Xóa tất cả sản phẩm không hợp lệ (ví dụ hết hàng) khỏi giỏ hàng trước khi lưu lại\r\n      this.cart = this.cart.filter((item) => item.quality > 0);\r\n\r\n      // Lưu giỏ hàng vào localStorage\r\n      localStorage.setItem('cart', JSON.stringify(this.cart));\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.menu-item-detail {\r\n  display: flex; /* Sử dụng flexbox để sắp xếp ảnh và thông tin */\r\n  align-items: flex-start; /* Căn lề cho phần thông tin bên trái */\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Khung nổi */\r\n  border-radius: 8px;\r\n  margin: 20px 0; /* Khoảng cách giữa các mục */\r\n  overflow: hidden; /* Đảm bảo không bị tràn ra ngoài khung */\r\n  background-color: #fff; /* Màu nền cho khung */\r\n}\r\n\r\n.menu-item-image {\r\n  width: 300px; /* Độ rộng của ảnh */\r\n  height: auto; /* Giữ tỉ lệ cho ảnh */\r\n  align-self: center; /* Căn giữa ảnh */\r\n  border-radius: 8px; /* Bo tròn góc cho ảnh */\r\n}\r\n\r\n.menu-item-detail-info {\r\n  padding: 20px; /* Thêm khoảng cách cho thông tin */\r\n  text-align: left;\r\n  flex: 1; /* Chiếm hết không gian còn lại */\r\n}\r\n\r\n.size-selection {\r\n  margin-top: 10px; /* Khoảng cách giữa kích thước và mô tả */\r\n  text-align: left; /* Căn lề trái cho văn bản */\r\n}\r\n\r\n.size-options {\r\n  display: flex; /* Hiển thị các lựa chọn kích thước theo hàng ngang */\r\n  gap: 10px; /* Khoảng cách giữa các radio button */\r\n}\r\n\r\n.menu-item-detail-info h3 {\r\n  font-size: 40px; /* Kích thước tiêu đề */\r\n  margin: 0 0 10px;\r\n  font-style: italic;\r\n  color: orange;\r\n}\r\n\r\n.menu-item-detail-info p {\r\n  margin: 0 0 5px; /* Khoảng cách giữa các đoạn văn */\r\n}\r\n.add-to-cart-button {\r\n  margin-top: 10px;\r\n  width: 30px;\r\n  height: 30px;\r\n  background-color: #ff8c00;\r\n  border: none;\r\n  color: #fff;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  border-radius: 50%;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.add-to-cart-button:hover {\r\n  background-color: #e67e00;\r\n}\r\n.menu-carousel {\r\n  padding-top: 20px;\r\n}\r\n.menu-item-detail {\r\n  width: 400px; /* Chiều rộng cố định cho khối vuông */\r\n  height: 670px; /* Chiều cao cố định cho khối vuông */\r\n  margin: 50px auto; /* Căn giữa theo chiều ngang với margin tự động */\r\n  display: flex; /* Sử dụng flexbox */\r\n  flex-direction: column; /* Xếp theo chiều dọc */\r\n  justify-content: center; /* Căn giữa nội dung theo chiều dọc */\r\n  align-items: flex-start; /* Căn trái nội dung */\r\n  padding: 20px; /* Padding bên trong khối */\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Đổ bóng cho khối */\r\n  border-radius: 8px; /* Bo tròn góc khối */\r\n  background-color: #fff; /* Màu nền cho khối */\r\n  border: 3px solid #b6832c; /* Thêm viền với màu #b6832c */\r\n}\r\n\r\n.Product-Pice {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #218838;\r\n}\r\n.add-item {\r\n  align-self: center;\r\n  width: 40px;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAkB;mBAHnC;;EAKaA,KAAK,EAAC;AAAuB;;EAG7BA,KAAK,EAAC;AAAc;;EAIlBA,KAAK,EAAC;AAAgB;;EAEpBA,KAAK,EAAC;AAAc;mBAdrC;oBAAA;;EA4BaA,KAAK,EAAC;AAAU;;EA5B7BC,GAAA;AAAA;;EAAAA,GAAA;AAAA;;uBACEC,mBAAA,CAwCM,OAxCNC,UAwCM,GAvCJC,mBAAA,CAsCM,OAtCNC,UAsCM,GArCJD,mBAAA,CAoCM,OApCNE,UAoCM,GAnCJF,mBAAA,CAAgE;IAA1DG,GAAG,EAAEC,KAAA,CAAAC,OAAO,CAACC,KAAK;IAAEC,GAAG,EAAC,OAAO;IAACX,KAAK,EAAC;0BAJpDY,UAAA,GAKQR,mBAAA,CAsBM,OAtBNS,UAsBM,GArBJT,mBAAA,CAA2B,YAAAU,gBAAA,CAApBN,KAAA,CAAAC,OAAO,CAACM,IAAI,kBACnBX,mBAAA,CAAgC,WAAAU,gBAAA,CAA1BN,KAAA,CAAAC,OAAO,CAACO,WAAW,kBACzBZ,mBAAA,CAA+C,KAA/Ca,UAA+C,EAAAH,gBAAA,CAApBN,KAAA,CAAAU,aAAa,kBACxCd,mBAAA,CAA0C,WAAvC,gBAAc,GAAAU,gBAAA,CAAGN,KAAA,CAAAC,OAAO,CAACU,OAAO,kBAEnCC,mBAAA,qBAAwB,EACxBhB,mBAAA,CAcM,OAdNiB,UAcM,G,0BAbJjB,mBAAA,CAAwB,YAApB,iBAAe,sBACnBA,mBAAA,CAWM,OAXNkB,UAWM,I,kBAVJpB,mBAAA,CASMqB,SAAA,QAxBpBC,WAAA,CAekChB,KAAA,CAAAiB,KAAK,EAAbC,IAAI;yBAAhBxB,mBAAA,CASM;MATsBD,GAAG,EAAEyB,IAAI,CAACC;wBACpCvB,mBAAA,CAME;MALAwB,IAAI,EAAC,OAAO;MACXD,EAAE,YAAYD,IAAI,CAACC,EAAE;MACrBE,KAAK,EAAEH,IAAI,CAACE,IAAI;MAnBnC,uBAAAE,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAoB2BvB,KAAA,CAAAwB,YAAY,GAAAD,MAAA;MACpBE,QAAM,EAAAF,MAAA,IAAEG,QAAA,CAAAC,WAAW,CAACT,IAAI,CAACU,KAAK;6CArBjDC,UAAA,I,eAoB2B7B,KAAA,CAAAwB,YAAY,E,GAGvB5B,mBAAA,CAAuD;MAA/CkC,GAAG,YAAYZ,IAAI,CAACC;wBAAOD,IAAI,CAACE,IAAI,wBAvB5DW,WAAA,E;wCA4BQnC,mBAAA,CAUM,OAVNoC,WAUM,GATOC,QAAQ,CAACjC,KAAA,CAAAC,OAAO,CAACU,OAAO,W,cAAnCjB,mBAAA,CAA0D,OA7BpEwC,WAAA,EA6BsD,UAAQ,M,cACpDxC,mBAAA,CAOM,OArChByC,WAAA,GA+BYvC,mBAAA,CAKS;IAJPJ,KAAK,EAAC,oBAAoB;IACzB4C,OAAK,EAAAd,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEG,QAAA,CAAAW,SAAS,CAACrC,KAAA,CAAAC,OAAO,EAAED,KAAA,CAAAwB,YAAY,EAAExB,KAAA,CAAAU,aAAa;KACvD,KAED,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}