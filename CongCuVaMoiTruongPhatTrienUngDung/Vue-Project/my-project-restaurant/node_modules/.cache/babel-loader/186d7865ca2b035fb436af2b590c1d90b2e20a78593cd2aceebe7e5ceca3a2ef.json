{"ast":null,"code":"import axios from 'axios';\n// import { mapGetters } from 'vuex';\nimport cart from '../data/Cart';\nimport eventBus from '@/evenBus.js';\nexport default {\n  data() {\n    return {\n      cart: cart,\n      orderInfo: {\n        name: '',\n        phone: '',\n        email: '',\n        instructions: '',\n        paymentMethod: ''\n      },\n      showSuccessMessage: false,\n      showDeleteConfirmation: false,\n      showErrorMessage: false,\n      showLoginErrorMessage: false,\n      user: JSON.parse(localStorage.getItem('userCurrent')) || null,\n      products: [] // Chứa các sản phẩm lấy từ API\n    };\n  },\n  computed: {\n    // ...mapGetters(['products']),\n    totalPrice() {\n      return this.cart.reduce((total, item) => {\n        const numericPrice = parseFloat(item.selectedPrice.replace(/[^0-9.-]+/g, ''));\n        return total + item.quantity * numericPrice;\n      }, 0);\n    },\n    totalQuantity() {\n      return this.cart.reduce((total, item) => total + item.quantity, 0);\n    }\n  },\n  async mounted() {\n    // Lấy sản phẩm từ API\n    try {\n      const response = await axios.get(`http://localhost:3000/product`); // Thay API_URL_HERE bằng URL API thực tế\n      this.products = response.data; // Cập nhật danh sách sản phẩm từ API\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    }\n  },\n  methods: {\n    async deleteproduct(item) {\n      // Lọc sản phẩm cần xóa khỏi giỏ hàng\n      this.cart = this.cart.filter(x => x.id !== item.id);\n      this.updateCartCount();\n    },\n    async increaseQuantity(item) {\n      // Tìm sản phẩm trong mảng products (đã lấy từ API)\n      const prod = this.products.find(i => i.id === item.id);\n      if (prod && item.quantity < prod.quality) {\n        item.quantity++;\n      }\n      this.updateCartCount();\n    },\n    async decreaseQuantity(item) {\n      // Tìm sản phẩm trong mảng products (đã lấy từ API)\n      const prod = this.products.find(i => i.id === item.id);\n      if (prod && item.quantity > 0) {\n        item.quantity--;\n        if (item.quantity <= 0) {\n          this.deleteproduct(item);\n        }\n      }\n      this.updateCartCount();\n    },\n    clearCart() {\n      this.cart = [];\n      this.updateCartCount();\n    },\n    updateCartCount() {\n      const newCount = this.cart.reduce((total, item) => total + item.quantity, 0);\n      eventBus.emit('cart-updated', newCount);\n    },\n    async handleSubmit() {\n      if (!this.user) {\n        this.showLoginErrorMessage = true;\n        return;\n      }\n      if (!this.orderInfo.name || !this.orderInfo.phone || !this.orderInfo.email || !this.orderInfo.instructions || !this.orderInfo.paymentMethod) {\n        this.showErrorMessage = true;\n        return;\n      }\n      this.showErrorMessage = false;\n      const currentDate = new Date();\n      const dateOrder = currentDate.toISOString();\n      const order = {\n        name: this.orderInfo.name,\n        details: this.cart.map(item => ({\n          image: item.image,\n          quantity: item.quantity,\n          name: item.name,\n          selectedSize: item.selectedSize,\n          selectedPrice: item.selectedPrice\n        })),\n        paymentMethod: this.orderInfo.paymentMethod,\n        address: this.orderInfo.instructions,\n        totalPrice: this.totalPrice + 25000,\n        dateOrder: dateOrder\n      };\n      try {\n        // Gửi đơn hàng lên API hoặc lưu lịch sử đơn hàng\n        await axios.post('http://localhost:3000/orderHistory', order);\n\n        // Cập nhật số lượng tồn kho cho từng sản phẩm trong giỏ hàng\n        for (let item of this.cart) {\n          try {\n            // Lấy thông tin sản phẩm hiện tại từ API\n            const response = await axios.get(`http://localhost:3000/products/${item.id}`);\n            const product = response.data;\n            if (product) {\n              // Tính toán số lượng mới\n              const newQuality = product.quality - item.quantity;\n              if (newQuality >= 0) {\n                // Cập nhật sản phẩm với số lượng mới\n                await axios.put(`http://localhost:3000/products/${item.id}`, {\n                  ...product,\n                  // Duy trì các trường hiện tại\n                  quality: newQuality // Cập nhật số lượng tồn kho\n                });\n              }\n            }\n          } catch (error) {\n            console.error(`Lỗi khi cập nhật sản phẩm có ID ${item.id}:`, error);\n          }\n        }\n\n        // Xóa giỏ hàng sau khi thanh toán thành công\n        this.cart = [];\n        alert('Thanh toán thành công!', 'success', 'Thành công');\n      } catch (error) {\n        console.error('Lỗi khi xử lý thanh toán:', error);\n        this.showToast('Đã xảy ra lỗi khi thanh toán!', 'error', 'Lỗi');\n      }\n    },\n    handleDeleteOrder() {\n      this.showDeleteConfirmation = true;\n    },\n    confirmDeleteOrder() {\n      this.clearCart();\n      this.showDeleteConfirmation = false;\n    },\n    cancelDeleteOrder() {\n      this.showDeleteConfirmation = false;\n    },\n    closeSuccessMessage() {\n      this.showSuccessMessage = false;\n    },\n    closeLoginErrorMessage() {\n      this.showLoginErrorMessage = false;\n    }\n  },\n  created() {\n    const storedCart = localStorage.getItem('cart');\n    if (storedCart) {\n      this.cart = JSON.parse(storedCart);\n    }\n  },\n  watch: {\n    cart: {\n      handler(newCart) {\n        localStorage.setItem('cart', JSON.stringify(newCart));\n      },\n      deep: true\n    }\n  }\n};","map":{"version":3,"names":["axios","cart","eventBus","data","orderInfo","name","phone","email","instructions","paymentMethod","showSuccessMessage","showDeleteConfirmation","showErrorMessage","showLoginErrorMessage","user","JSON","parse","localStorage","getItem","products","computed","totalPrice","reduce","total","item","numericPrice","parseFloat","selectedPrice","replace","quantity","totalQuantity","mounted","response","get","error","console","methods","deleteproduct","filter","x","id","updateCartCount","increaseQuantity","prod","find","i","quality","decreaseQuantity","clearCart","newCount","emit","handleSubmit","currentDate","Date","dateOrder","toISOString","order","details","map","image","selectedSize","address","post","product","newQuality","put","alert","showToast","handleDeleteOrder","confirmDeleteOrder","cancelDeleteOrder","closeSuccessMessage","closeLoginErrorMessage","created","storedCart","watch","handler","newCart","setItem","stringify","deep"],"sources":["D:\\BaiHoc\\HK6\\CongCuVaMoiTruongPhatTrienUngDung\\Vue-Project\\my-project-restaurant\\src\\components\\Cart-comp.vue"],"sourcesContent":["<template>\r\n  <div class=\"modal-content\">\r\n    <div class=\"order-section\">\r\n      <div class=\"delivery-header\">\r\n        <h2 class=\"delivery-title\">Giao hàng</h2>\r\n        <button class=\"change-method\">Đổi phương thức</button>\r\n      </div>\r\n      <div class=\"location-info\">\r\n        <img src=\"../assets/Delivery2.png\" alt=\"delivery icon\" class=\"delivery-icon\" />\r\n        <span>Thành phố Hồ Chí Minh, Hồ Chí Minh, Việt Nam</span>\r\n      </div>\r\n      <form @submit.prevent=\"handleSubmit\">\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"orderInfo.name\"\r\n          placeholder=\"Tên người nhận\"\r\n          required\r\n          class=\"input-field\"\r\n        />\r\n        <input\r\n          type=\"tel\"\r\n          v-model=\"orderInfo.phone\"\r\n          placeholder=\"Số điện thoại\"\r\n          required\r\n          class=\"input-field\"\r\n        />\r\n        <input\r\n          type=\"email\"\r\n          v-model=\"orderInfo.email\"\r\n          placeholder=\"Email người nhận\"\r\n          required\r\n          class=\"input-field\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"orderInfo.instructions\"\r\n          placeholder=\"Địa chỉ nhận hàng\"\r\n          class=\"input-field\"\r\n        />\r\n        <h3>Phương thức thanh toán</h3>\r\n        <div class=\"payment-options\">\r\n          <label>\r\n            <input type=\"radio\" value=\"tiền mặt\" v-model=\"orderInfo.paymentMethod\" /> Tiền mặt\r\n          </label>\r\n          <label>\r\n            <input type=\"radio\" value=\"MoMo\" v-model=\"orderInfo.paymentMethod\" /> MoMo\r\n          </label>\r\n          <label>\r\n            <input type=\"radio\" value=\"ZaloPay\" v-model=\"orderInfo.paymentMethod\" /> ZaloPay\r\n          </label>\r\n          <label>\r\n            <input type=\"radio\" value=\"ShopeePay\" v-model=\"orderInfo.paymentMethod\" /> ShopeePay\r\n          </label>\r\n          <label>\r\n            <input type=\"radio\" value=\"thẻ ngân hàng\" v-model=\"orderInfo.paymentMethod\" /> Thẻ ngân\r\n            hàng\r\n          </label>\r\n        </div>\r\n        <label>\r\n          <input type=\"checkbox\" required /> Đồng ý với các\r\n          <a href=\"#\">điều khoản và điều kiện</a>\r\n        </label>\r\n      </form>\r\n      <div v-if=\"showSuccessMessage\" class=\"success-message\">\r\n        <p>Thanh toán thành công!</p>\r\n        <button @click=\"closeSuccessMessage\">Đóng</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"cart-summary\">\r\n      <h2>Các món đã chọn</h2>\r\n      <div class=\"cart-item\" v-for=\"item in cart\" :key=\"item.id\">\r\n        <img :src=\"item.image\" style=\"height: 100px; width: 100px\" />\r\n        <div>{{ item.quantity }} x {{ item.name }}</div>\r\n        <div>{{ item.selectedSize }}</div>\r\n        <div>{{ item.selectedPrice }}</div>\r\n        <button @click=\"decreaseQuantity(item)\">-</button>\r\n        <button @click=\"increaseQuantity(item)\">+</button>\r\n      </div>\r\n      <div class=\"total-section\">\r\n        <div>Phí giao hàng: 25,000 VNĐ</div>\r\n        <div class=\"parent-checkout-btn\">\r\n          <div class=\"final-price\">\r\n            <div>Thành tiền</div>\r\n            <div class=\"price-amount\">{{ totalPrice + 25000 }} VNĐ</div>\r\n          </div>\r\n          <button class=\"checkout-btn\" @click=\"handleSubmit\">Đặt hàng</button>\r\n        </div>\r\n        <button class=\"checkout-btn\" @click=\"handleDeleteOrder\">🗑️Xóa đơn hàng</button>\r\n        <div v-if=\"showErrorMessage\" class=\"error-message\">Vui lòng điền đầy đủ thông tin</div>\r\n        <div v-if=\"showLoginErrorMessage\" class=\"error-message\">\r\n          Bạn cần đăng nhập để thực hiện đặt hàng!\r\n          <button @click=\"closeLoginErrorMessage\">Đóng</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"showDeleteConfirmation\" class=\"delete-confirmation-modal\">\r\n      <div class=\"modal-delete\">\r\n        <p>Bạn có chắc chắn muốn xoá toàn bộ đơn hàng không?</p>\r\n        <div class=\"button-container\">\r\n          <button class=\"confirm-btn\" @click=\"confirmDeleteOrder\">Xác nhận</button>\r\n          <button class=\"cancel-btn\" @click=\"cancelDeleteOrder\">Hủy</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n// import { mapGetters } from 'vuex';\r\nimport cart from '../data/Cart';\r\nimport eventBus from '@/evenBus.js';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      cart: cart,\r\n\r\n      orderInfo: {\r\n        name: '',\r\n        phone: '',\r\n        email: '',\r\n        instructions: '',\r\n        paymentMethod: '',\r\n      },\r\n      showSuccessMessage: false,\r\n      showDeleteConfirmation: false,\r\n      showErrorMessage: false,\r\n      showLoginErrorMessage: false,\r\n      user: JSON.parse(localStorage.getItem('userCurrent')) || null,\r\n      products: [], // Chứa các sản phẩm lấy từ API\r\n    };\r\n  },\r\n  computed: {\r\n    // ...mapGetters(['products']),\r\n    totalPrice() {\r\n      return this.cart.reduce((total, item) => {\r\n        const numericPrice = parseFloat(item.selectedPrice.replace(/[^0-9.-]+/g, ''));\r\n        return total + item.quantity * numericPrice;\r\n      }, 0);\r\n    },\r\n    totalQuantity() {\r\n      return this.cart.reduce((total, item) => total + item.quantity, 0);\r\n    },\r\n  },\r\n  async mounted() {\r\n    // Lấy sản phẩm từ API\r\n    try {\r\n      const response = await axios.get(`http://localhost:3000/product`); // Thay API_URL_HERE bằng URL API thực tế\r\n      this.products = response.data; // Cập nhật danh sách sản phẩm từ API\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n    }\r\n  },\r\n  methods: {\r\n    async deleteproduct(item) {\r\n      // Lọc sản phẩm cần xóa khỏi giỏ hàng\r\n      this.cart = this.cart.filter((x) => x.id !== item.id);\r\n      this.updateCartCount();\r\n    },\r\n    async increaseQuantity(item) {\r\n      // Tìm sản phẩm trong mảng products (đã lấy từ API)\r\n      const prod = this.products.find((i) => i.id === item.id);\r\n\r\n      if (prod && item.quantity < prod.quality) {\r\n        item.quantity++;\r\n      }\r\n      this.updateCartCount();\r\n    },\r\n    async decreaseQuantity(item) {\r\n      // Tìm sản phẩm trong mảng products (đã lấy từ API)\r\n      const prod = this.products.find((i) => i.id === item.id);\r\n\r\n      if (prod && item.quantity > 0) {\r\n        item.quantity--;\r\n        if (item.quantity <= 0) {\r\n          this.deleteproduct(item);\r\n        }\r\n      }\r\n\r\n      this.updateCartCount();\r\n    },\r\n\r\n    clearCart() {\r\n      this.cart = [];\r\n\r\n      this.updateCartCount();\r\n    },\r\n    updateCartCount() {\r\n      const newCount = this.cart.reduce((total, item) => total + item.quantity, 0);\r\n      eventBus.emit('cart-updated', newCount);\r\n    },\r\n    async handleSubmit() {\r\n      if (!this.user) {\r\n        this.showLoginErrorMessage = true;\r\n        return;\r\n      }\r\n\r\n      if (\r\n        !this.orderInfo.name ||\r\n        !this.orderInfo.phone ||\r\n        !this.orderInfo.email ||\r\n        !this.orderInfo.instructions ||\r\n        !this.orderInfo.paymentMethod\r\n      ) {\r\n        this.showErrorMessage = true;\r\n        return;\r\n      }\r\n      this.showErrorMessage = false;\r\n\r\n      const currentDate = new Date();\r\n      const dateOrder = currentDate.toISOString();\r\n\r\n      const order = {\r\n        name: this.orderInfo.name,\r\n        details: this.cart.map((item) => ({\r\n          image: item.image,\r\n          quantity: item.quantity,\r\n          name: item.name,\r\n          selectedSize: item.selectedSize,\r\n          selectedPrice: item.selectedPrice,\r\n        })),\r\n        paymentMethod: this.orderInfo.paymentMethod,\r\n        address: this.orderInfo.instructions,\r\n        totalPrice: this.totalPrice + 25000,\r\n        dateOrder: dateOrder,\r\n      };\r\n\r\n      try {\r\n        // Gửi đơn hàng lên API hoặc lưu lịch sử đơn hàng\r\n        await axios.post('http://localhost:3000/orderHistory', order);\r\n\r\n        // Cập nhật số lượng tồn kho cho từng sản phẩm trong giỏ hàng\r\n        for (let item of this.cart) {\r\n          try {\r\n            // Lấy thông tin sản phẩm hiện tại từ API\r\n            const response = await axios.get(`http://localhost:3000/products/${item.id}`);\r\n            const product = response.data;\r\n\r\n            if (product) {\r\n              // Tính toán số lượng mới\r\n              const newQuality = product.quality - item.quantity;\r\n\r\n              if (newQuality >= 0) {\r\n                // Cập nhật sản phẩm với số lượng mới\r\n                await axios.put(`http://localhost:3000/products/${item.id}`, {\r\n                  ...product, // Duy trì các trường hiện tại\r\n                  quality: newQuality, // Cập nhật số lượng tồn kho\r\n                });\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.error(`Lỗi khi cập nhật sản phẩm có ID ${item.id}:`, error);\r\n          }\r\n        }\r\n\r\n        // Xóa giỏ hàng sau khi thanh toán thành công\r\n        this.cart = [];\r\n        alert('Thanh toán thành công!', 'success', 'Thành công');\r\n      } catch (error) {\r\n        console.error('Lỗi khi xử lý thanh toán:', error);\r\n        this.showToast('Đã xảy ra lỗi khi thanh toán!', 'error', 'Lỗi');\r\n      }\r\n    },\r\n\r\n    handleDeleteOrder() {\r\n      this.showDeleteConfirmation = true;\r\n    },\r\n    confirmDeleteOrder() {\r\n      this.clearCart();\r\n      this.showDeleteConfirmation = false;\r\n    },\r\n    cancelDeleteOrder() {\r\n      this.showDeleteConfirmation = false;\r\n    },\r\n    closeSuccessMessage() {\r\n      this.showSuccessMessage = false;\r\n    },\r\n    closeLoginErrorMessage() {\r\n      this.showLoginErrorMessage = false;\r\n    },\r\n  },\r\n  created() {\r\n    const storedCart = localStorage.getItem('cart');\r\n    if (storedCart) {\r\n      this.cart = JSON.parse(storedCart);\r\n    }\r\n  },\r\n  watch: {\r\n    cart: {\r\n      handler(newCart) {\r\n        localStorage.setItem('cart', JSON.stringify(newCart));\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.modal-content {\r\n  display: flex;\r\n  background-color: #f7f7f7;\r\n  padding-top: 60px;\r\n}\r\n.order-section,\r\n.cart-summary {\r\n  flex: 1;\r\n  padding: 20px;\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  margin-right: 10px;\r\n}\r\nh2 {\r\n  color: #ffba00;\r\n  font-weight: bold;\r\n}\r\n.delivery-icon {\r\n  width: 24px;\r\n  margin-right: 10px;\r\n}\r\n.input-field {\r\n  width: 100%;\r\n  padding: 10px;\r\n  margin: 10px 0;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n}\r\n.payment-options {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 10px 0;\r\n}\r\n.payment-options label {\r\n  margin-bottom: 5px;\r\n}\r\n.total-section {\r\n  border-top: 1px solid #ddd;\r\n  padding-top: 20px;\r\n}\r\n.parent-checkout-btn {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: #ff6f00;\r\n  padding: 10px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.final-price {\r\n  color: white;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n}\r\n\r\n.checkout-btn {\r\n  padding: 10px 20px;\r\n  margin: 0;\r\n  border: none;\r\n  font-size: 16px;\r\n  background-color: white;\r\n  color: #ff6f00;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n}\r\n.price-amount {\r\n  font-style: italic;\r\n  font-size: 20px; /* Kích thước chữ lớn hơn cho số tiền */\r\n  color: white; /* Màu sắc nổi bật cho số tiền */\r\n}\r\n.success-message {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background-color: #4caf50;\r\n  color: white;\r\n  padding: 20px;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);\r\n  z-index: 1000;\r\n}\r\n/* Thêm kiểu cho modal xác nhận xoá đơn hàng */\r\n.delete-confirmation-modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n.modal-delete {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  text-align: center;\r\n  max-width: 400px;\r\n  width: 100%;\r\n}\r\n.button-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  margin-top: 20px; /* Khoảng cách giữa dòng thông báo và các nút */\r\n}\r\n\r\n.confirm-btn {\r\n  background-color: #d9534f;\r\n  color: white;\r\n  border: none;\r\n  padding: 10px 20px;\r\n  cursor: pointer;\r\n  border-radius: 5px;\r\n}\r\n\r\n.cancel-btn {\r\n  background-color: #5bc0de;\r\n  color: white;\r\n  border: none;\r\n  padding: 10px 20px;\r\n  cursor: pointer;\r\n  border-radius: 5px;\r\n}\r\n.error-message {\r\n  color: red;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}